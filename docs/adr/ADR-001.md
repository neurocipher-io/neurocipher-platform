id: ADR-001
title: Architecture Baseline
owner: Platform Engineering Lead
status: Accepted
last_reviewed: 2025-10-23

ADR-001 Architecture Baseline

  

  

- Status: Accepted
- Date: 2025-10-23
- Owners: Platform Lead

  

  

  

Context

  

  

Neurocipher requires an AWS-native data pipeline with strict separation from legacy upstream platforms. Workloads include bursty ingestion, schema normalization, embedding, hybrid retrieval, and API access.

  

  

Decision

  

  

Adopt AWS-managed services for control plane and elasticity. Persist vectors in Weaviate. Maintain hard separation from legacy platforms with no shared SDKs or schemas.

  

- Compute: Lambda for event handlers, Fargate for long-running workers
- Orchestration: EventBridge, SQS, Step Functions
- Storage: S3 raw and normalized, Postgres nc.* metadata tables (asset, source_document, ingestion_job, scan, finding, evidence) with RLS per DM-003.
- Search: Weaviate for vector, OpenSearch Serverless for keyword
- Networking: VPC with private subnets and VPC endpoints
- Secrets and keys: Secrets Manager and KMS per environment

Metadata for assets, documents, jobs, scans, findings, and evidence lives in Postgres (see DM-001..DM-003 and SEC-005). This choice preserves referential integrity, enforces tenant context via RLS, and gives API consumers a single metadata catalog; DynamoDB is not the canonical metadata store but continues to support auxiliary workloads such as the idempotency guard.

  

  

  

Alternatives

  

  

1. GCP or Azure native
2. Self-managed Kubernetes on EC2
3. Single engine for both vector and keyword

  

  

Rejected due to migration cost, ops overhead, or weaker query quality.

  

  

Consequences

  

  

- Fast path to production with managed primitives
- Vendor lock to AWS and Weaviate
- Separate budgets and accounts for dev, stg, prod
- No code sharing with external legacy stacks
- Tenant metadata tables remain in Postgres, so referential integrity, audit history, and RLS stay centralized (see DM-003 and SEC-005).

## Acceptance Criteria

- Core control plane and data plane components are deployed in AWS accounts as defined in this ADR (VPC, subnets, S3 buckets, SQS, Lambda/ECS, Weaviate, OpenSearch Serverless).
- IaC modules under `iac/` implement this baseline architecture and pass CI validation for all environments (dev, stg, prod).
- `docs/architecture/Data-Pipeline-Architecture.md` and `docs/architecture/System-Architecture-Blueprint.md` align with the decisions recorded here (no conflicting alternate baselines).
- Downstream specs that depend on this baseline (ING-001–003, DM-003, LAK-001, SVC-001/002, OBS-001–003, REL-001/002) reference ADR-001 as the canonical architecture decision.
- Any deviation from this baseline in production is documented via a new ADR (superseding or exception) and cross-referenced from ADR-001.

  

  

  

Links

  

  

- infra/modules/*
- services/*
